## WebSocketとは

### 概要
WebSocketとは、ブラウザとウェブサーバーとの間で双方向通信を行うための通信規格（プロトコル）のこと。<br/>
サーバー側とユーザー側が常にオンライン状態を維持することによって、双方向通信を可能にしている。<br/>

例えば、Facebookのチャットアプリのように、多数のクライアントが一つのページにアクセスしている場合に:
- この時に誰かがメッセージを投稿するとそれを即座に他のユーザーに通知する
- ユーザーがメッセージを書いている時に、「xxが記入中」のように表示する

といったことが可能になる。

<br/>

### 経緯
以前はWebでの通信はHTTPが主流だったが、時代が進むにつれてリアルタイムなやりとりが必要とされるようになった。<br/>
HTTPのロングポーリングを利用することで双方向通信を実現したり、Cometと呼ばれる手法を用いてリアルタイムでの操作を行えるようにしていたが、どちらも無駄が多く次第に廃れていった。<br/>
リアルタイムな双方向通信を低コストで行うために、WebSocketが開発された。<br/>
先駆けはFacebookらしい。

*ロングポーリング<br/>
クライアントからサーバーに更新があるかリクエストを送り、サーバーでは更新があるまで返事を保留しておく。<br/>
サーバーは更新があったタイミングでレスポンスを返し、クライアントはレスポンスを受け取ったら再度リクエストを送り更新がないか確認するという作業を繰り返す手法。

<br/>

### なぜHTTPではダメだったのか？
HTTPでリアルタイム通信を行うことが難しかった理由:
1. 1つのコネクションで1つのリクエストしか送れない
2. リクエストはクライアント側からしか送ることが出来ない

<br/>

### 仕組み
WebSocketは次の手順で通信を行う。

1. HTTP(厳密にはそれをwebsocketにupgradeしたもの)でクライアントとサーバー間で情報をやり取りしてコネクション確立
2. 確立されたコネクション上で、低コストな双方向通信

詳細は参考文献「WebSocketについて調べてみた。」を参照。

<br/>

### 活用例
- FacebookやDiscordなどのリアルタイムチャットアプリ
- Zoom や Google Meet のようなWeb会議アプリ
- アクセス解析

<br/>

### 参考文献
- [WebSocketについて調べてみた。](https://qiita.com/south37/items/6f92d4268fe676347160)
- [WebSocketとは？WebSocketについて詳しく解説します](https://www.freshvoice.net/knowledge/word/6323/)
- [リアルタイム通信を実現するWEB技術の違い【ポーリング、ロングポーリング、SSE、WebSocket】](https://penpen-dev.com/blog/realtime-commu/)
